<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
  <title>My Travel Journal</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="css/styles.css" th:href="@{css/styles.css}"/>
</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="100">
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#myPage">My Travel Journal</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#myPage">HOME</a></li>
        <li><a href="#tour">ENTRIES</a></li>
        <li><a href="#contact">NEW ENTRY</a></li>
		<li><a href="#stories">STORIES</a></li>
		<li><a href="#mapAnchor">LOCATION</a></li>
      </ul>
    </div>
  </div>
  <iframe id ="sc-widget" width="200" height="100"  scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/67230735&amp;color=ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=false&amp;show_user=true&amp;show_reposts=false&amp;show_artwork=false"></iframe>
</nav>
<div class="weather">
<a href="https://www.accuweather.com/en/fi/helsinki/133328/weather-forecast/133328" class="aw-widget-legal">
</a><div id="awcc1490297491164" class="aw-widget-current"  data-locationkey="" data-unit="c" data-language="en-us" data-useip="true" data-uid="awcc1490297491164"></div>
</div>
<div id="myCarousel" class="carousel slide" data-ride="carousel">

    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
      <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>


    <div class="carousel-inner" role="listbox">
      <div class="item active">
        <img src="images/136.jpg" alt="New York" width="1200" height="700"/>
        <div class="carousel-caption">
          <h3>Triglav</h3>
          <p>The climb every slovenian must do, and of course every tourist visiting Slovenia.</p>
        </div>      
      </div>

      <div class="item">
        <img src="images/167.jpg" alt="Chicago" width="1200" height="700"/>
        <div class="carousel-caption">
          <h3>Venice</h3>
          <p>The place to be, if cultural delights are among those things which you crave.</p>
        </div>      
      </div>
    
      <div class="item">
        <img src="images/222.jpg" alt="Los Angeles" width="1200" height="700"/>
        <div class="carousel-caption">
          <h3>Predjama</h3>
          <p>Predjama castle is unique and humid, really humid.</p>
        </div>      
      </div>
    </div>

    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
	
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
</div>


<div id="band" class="container text-center">
  <h3>THE JOURNEY</h3>
  <p>“No man ever steps in the same river twice, for it's not the same river and he's not the same man.”</p>
  <p><em>― Heraclitus</em></p>
</div>

<div id="tour" class="bg-1">
<br/>
<br/>
  <div class="container">
    <h3 class="text-center">ENTRIES</h3> 
    <div class="row" id="entries">  
    <div id="react"></div>
    </div>
  </div>
  </div>
  <div class="modal fade" id="myModal" role="dialog">
  
    <div class="modal-dialog">
    
<form role="form" th:action="@{/login#contact}" method="post">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">×</button>
          <h4><span class="glyphicon glyphicon-lock"></span> Login</h4>
        </div>
        <div class="modal-body">
<div class="form-group">
  <label for="title">Username: </label>
  <input type="text" class="form-control" id="username" name="username"/>
</div>

<div class="form-group">
  <label for="author">Password:</label>
  <input type="password" class="form-control" id="password" name="password"/>
</div>   
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-default pull-left" data-dismiss="modal">
            <span class="glyphicon glyphicon-remove"></span> Cancel
          </button>
          <button type="submit" class="btn">Log In</button>
        </div>
        
      </div>
       </form>
    </div>
  </div>  
<div id="contact" class="container">
<br/>
<br/>
<button class="logBtn" id="log" data-toggle="modal" data-target="#myModal">Log in</button>
<br/>
<br/>
  <h3 class="text-center">New Entry</h3>
  <div class="row">
    <div class="col-md-4">
      <p id="Mylocation" ><span class="glyphicon glyphicon-map-marker" style="color:red;"></span></p>
    </div>
    <div class="col-md-8">
    <div th:if="${param.error}">
	<p style="color:red;">Invalid username or password!</p>
</div>
    <form>
      <div class="row">
        <div class="col-sm-6 form-group">
        
          <input class="form-control" id="location" name="location" placeholder="Location" type="text"/>
        </div>
        <div class="col-sm-6 form-group">
         <div class='input-group date' id='datetimepicker1'>
                    <input type='text' class="form-control" id="date" name="date"/>
                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
        </div>
      </div>
      <textarea class="form-control" id="entry" name="entry" placeholder="Entry" rows="5"></textarea>
      <br/>
      <div class="row">
        <div class="col-md-12 form-group">
          
        </div>
      </div>
	  </form>
    </div>
  </div>
  <h3 id="stories"><br/>
  <br/></h3>
  <br/>
  <h3 class="text-center">Stories along the road </h3>  
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#home">Nepal</a></li>
    <li><a data-toggle="tab" href="#menu1">Australia</a></li>
    <li><a data-toggle="tab" href="#menu2">Myanmar</a></li>
  </ul>

  <div class="tab-content">
    <div id="home" class="tab-pane fade in active">
<div class="row">
<div class="col-sm-6 form-group">
      <h2>Nepal, Himalayas</h2>

		<img src="images/315.jpg" class="stories" alt="Nepal"/>
</div>
<div class="col-sm-6 form-group" id="storytext">
      <p>Himalayas, there´s nothing like it on this planet. Lorem ipsum dolor sit amet, iisque gloriatur ex vel, te sit purto quando consectetuer. Pri an modo iudico vocent. Nemore reprimique sit ei. An ius probo commodo denique, ea vix nisl perfecto oportere, no sit idque scripserit. Veri porro ad nam. Id nostrud dolores eam.</p>
</div>
    </div>
</div>
    <div id="menu2" class="tab-pane fade">
<div class="row">
<div class="col-sm-6 form-group">
      <h2>Derailed in Myanmar</h2>
	  <img src="images/100.jpg" class="stories" alt="Myanmar"/>
</div>
<div class="col-sm-6 form-group" id="storytext">
      <p>Nothing quite puts you off the rails like the trains in Myanmar. Lorem ipsum dolor sit amet, iisque gloriatur ex vel, te sit purto quando consectetuer. Pri an modo iudico vocent. Nemore reprimique sit ei.</p>
</div>
    </div>
</div>
    <div id="menu1" class="tab-pane fade">
<div class="row">
<div class="col-sm-6 form-group">
      <h2>Australia offers solitude</h2>
	  <img src="images/547.jpg" class="stories" alt="Australia"/>
</div>
<div class="col-sm-6 form-group" id="storytext">
      <p>Not a soul around, and I hope it will stay that way. Lorem ipsum dolor sit amet, iisque gloriatur ex vel, te sit purto quando consectetuer. Pri an modo iudico vocent. Nemore reprimique sit ei. An ius probo commodo denique, ea vix nisl perfecto oportere, no sit idque scripserit. Veri porro ad nam. Id nostrud dolores eam. Aperiri volumus accusam vim ne, ut has offendit antiopam. Eos et tale ornatus. Cum ei quis zril. In graeco detracto incorrupte duo.</p>
</div>
    </div>
</div>
  </div>
  <h3 class="text-center" id="mapAnchor"></h3>
</div>
<h3 class="text-center">Where am I?</h3>
<div id="map"></div>
<script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 6
        });
        var infoWindow = new google.maps.InfoWindow({map: map});
        
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
		
			var MyLat = position.coords.latitude;
			var MyLng = position.coords.longitude;
			$('document').ready(function(){
			$("#Mylocation").append('<strong> Latitude:</strong> ' + MyLat + '<br/> &nbsp; &nbsp;  &nbsp; <strong>Longitude:</strong> ' + MyLng);
}); 
			
            infoWindow.setPosition(pos);
            infoWindow.setContent('Location found.');
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }
      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
      }
    </script>
<script async='async' defer='defer' src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkLbSgKM3xtJUxQCpHmUtcbgjBisngEfk&amp;callback=initMap"></script>

<footer class="text-center">
  <a class="up-arrow" href="#myPage" data-toggle="tooltip" title="TO TOP">
    <span class="glyphicon glyphicon-chevron-up"></span>
  </a><br/><br/>
  <p>Copyright &copy; 2017 Jukka Nilsson<br/>
<a href="http://www.jukkanilsson.com" data-toggle="tooltip" title="Visit www.jukkanilsson.com">www.jukkanilsson.com</a></p> 
</footer>

<script>
$(document).ready(function(){
 
  $('[data-toggle="tooltip"]').tooltip(); 
  
  $(".navbar a, footer a[href='#myPage']").on('click', function(event) {
    if (this.hash !== "") {
      event.preventDefault();
      var hash = this.hash;
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 900, function(){
   
        
        window.location.hash = hash;
      });
    }
  });
})
</script>
<script type="text/javascript" src="https://oap.accuweather.com/launch.js"></script>
<script>
$(function () {
   var bindDatePicker = function() {
		$(".date").datetimepicker({
        format:'YYYY-MM-DD',
			icons: {
				time: "fa fa-clock-o",
				date: "fa fa-calendar",
				up: "fa fa-arrow-up",
				down: "fa fa-arrow-down"
			}
		}).find('input:first').on("blur",function () {
			
			var date = parseDate($(this).val());
			if (! isValidDate(date)) {
				
				date = moment().format('YYYY-MM-DD');
			}
			$(this).val(date);
		});
	}
   
   var isValidDate = function(value, format) {
		format = format || false;
		
		if (format) {
			value = parseDate(value);
		}
		var timestamp = Date.parse(value);
		return isNaN(timestamp) == false;
   }
   
   var parseDate = function(value) {
		var m = value.match(/^(\d{1,2})(\/|-)?(\d{1,2})(\/|-)?(\d{4})$/);
		if (m)
			value = m[5] + '-' + ("00" + m[3]).slice(-2) + '-' + ("00" + m[1]).slice(-2);
		return value;
   }
   
   bindDatePicker();
 });
 </script>
 <script src="built/bundle.js"></script>
</body>
</html>